(this.webpackJsonpclient_shop=this.webpackJsonpclient_shop||[]).push([[7],{121:function(e,t,s){"use strict";function c(e){const t=e+"";let s="",c=0;for(let a=t.length-1;a>=0;a--)c++,s=t[a]+s,c%3===0&&0!==a&&(s="."+s,c=0);return s}s.d(t,"a",(function(){return c}))},122:function(e,t,s){"use strict";var c=s(11);const a={getCarts:e=>{const t="/carts".concat(e);return c.a.get(t)},postAddToCart:e=>{const t="/carts/add".concat(e);return c.a.post(t)},deleteToCart:e=>{const t="/carts/delete".concat(e);return c.a.delete(t)},putToCart:e=>{const t="/carts/update".concat(e);return c.a.put(t)},postCheckNumberProduct:e=>c.a.post("/carts/check",e)};t.a=a},133:function(e,t,s){"use strict";s.r(t);var c=s(1),a=s(10),l=s(32),r=s(6),n=s(121),i=s(0);function o(e){const{listCart:t,onDeleteCart:s,onUpdateCount:c}=e,a=e=>{console.log(e.target.value)};return Object(i.jsx)("div",{className:"table-responsive mb-4",children:Object(i.jsxs)("table",{className:"table",children:[Object(i.jsx)("thead",{className:"bg-light",children:Object(i.jsxs)("tr",{className:"text-center",children:[Object(i.jsxs)("th",{className:"border-0",scope:"col",children:[" ",Object(i.jsx)("strong",{className:"text-small text-uppercase",children:"Image"})]}),Object(i.jsxs)("th",{className:"border-0",scope:"col",children:[" ",Object(i.jsx)("strong",{className:"text-small text-uppercase",children:"Product"})]}),Object(i.jsxs)("th",{className:"border-0",scope:"col",children:[" ",Object(i.jsx)("strong",{className:"text-small text-uppercase",children:"Price"})]}),Object(i.jsxs)("th",{className:"border-0",scope:"col",children:[" ",Object(i.jsx)("strong",{className:"text-small text-uppercase",children:"Quantity"})]}),Object(i.jsxs)("th",{className:"border-0",scope:"col",children:[" ",Object(i.jsx)("strong",{className:"text-small text-uppercase",children:"Total"})]}),Object(i.jsxs)("th",{className:"border-0",scope:"col",children:[" ",Object(i.jsx)("strong",{className:"text-small text-uppercase",children:"Remove"})]})]})}),Object(i.jsx)("tbody",{children:t&&t.map(((e,t)=>Object(i.jsxs)("tr",{className:"text-center",children:[Object(i.jsx)("td",{className:"pl-0 border-0",children:Object(i.jsx)("div",{className:"media align-items-center justify-content-center",children:Object(i.jsx)(r.b,{className:"reset-anchor d-block animsition-link",to:"/detail/".concat(e._id),children:Object(i.jsx)("img",{src:e.img1,alt:"...",width:"70"})})})}),Object(i.jsx)("td",{className:"align-middle border-0",children:Object(i.jsx)("div",{className:"media align-items-center justify-content-center",children:Object(i.jsx)(r.b,{className:"reset-anchor h6 animsition-link",to:"/detail/".concat(e._id),children:e.name})})}),Object(i.jsx)("td",{className:"align-middle border-0",children:Object(i.jsxs)("p",{className:"mb-0 small",children:[Object(n.a)(e.price)," VND"]})}),Object(i.jsx)("td",{className:"align-middle border-0",children:Object(i.jsxs)("div",{className:"quantity justify-content-center",children:[Object(i.jsx)("button",{className:"dec-btn p-0",style:{cursor:"pointer"},onClick:()=>((e,t,s)=>{if(!c)return;if(1===s)return;const a=parseInt(s)-1;console.log("updateCount",a),c(e,t,a)})(e.idUser,e._id,e.quantity),children:Object(i.jsx)("i",{className:"fas fa-caret-left"})}),Object(i.jsx)("input",{className:"form-control form-control-sm border-0 shadow-0 p-0",type:"text",value:e.quantity,onChange:a}),Object(i.jsx)("button",{className:"inc-btn p-0",style:{cursor:"pointer"},onClick:()=>((e,t,s)=>{if(!c)return;const a=parseInt(s)+1;console.log("updateCOunt",a),c(e,t,a)})(e.idUser,e._id,e.quantity),children:Object(i.jsx)("i",{className:"fas fa-caret-right"})})]})}),Object(i.jsx)("td",{className:"align-middle border-0",children:Object(i.jsxs)("p",{className:"mb-0 small",children:[Object(n.a)(parseInt(e.price)*parseInt(e.quantity))," ","VND"]})}),Object(i.jsx)("td",{className:"align-middle border-0",children:Object(i.jsx)("a",{className:"reset-anchor remove_cart",style:{cursor:"pointer"},onClick:()=>{return t=e.idUser,c=e._id,void(s&&s(t,c));var t,c},children:Object(i.jsx)("i",{className:"fas fa-trash-alt small text-muted"})})})]},t)))})]})})}o.defaultProps={listCart:[],onDeleteCart:null,onUpdateCount:null};var d=o,j=s(124),b=s.n(j),m=s(3),h=s(122),u=s(31),x=s.n(u);t.default=function(e){const t=Object(a.c)((e=>e.Cart.id_user));console.log("id.\u1ee7e",t);const s=Object(a.c)((e=>e.Cart.listCart)),[o,j]=Object(c.useState)([]),[u,p]=Object(c.useState)(),[g,O]=Object(c.useState)(),N=Object(a.b)(),[f,C]=Object(c.useState)({idProduct:"",count:""}),[y,v]=Object(c.useState)(!1);function _(e){let t=0;e.map((e=>t+=parseInt(e.price)*parseInt(e.quantity)));p(t)}Object(c.useEffect)((()=>{localStorage.getItem("id_user")||(j(s),_(s))}),[f]),Object(c.useEffect)((()=>{(async()=>{if(localStorage.getItem("id_user")){const e={idUser:localStorage.getItem("id_user")},t="?"+x.a.stringify(e);console.log(t);const s=await h.a.getCarts(t);console.log(s.cart),j(s.cart),_(s.cart)}})(),v(!1)}),[y]);const[k,w]=Object(c.useState)(!1);return Object(i.jsxs)("div",{className:"container",children:[Object(i.jsx)("section",{className:"py-5 bg-light",children:Object(i.jsx)("div",{className:"container",children:Object(i.jsxs)("div",{className:"row px-4 px-lg-5 py-lg-4 align-items-center",children:[Object(i.jsx)("div",{className:"col-lg-6",children:Object(i.jsx)("h1",{className:"h2 text-uppercase mb-0",children:"Cart"})}),Object(i.jsx)("div",{className:"col-lg-6 text-lg-right",children:Object(i.jsx)("nav",{"aria-label":"breadcrumb",children:Object(i.jsx)("ol",{className:"breadcrumb justify-content-lg-end mb-0 px-0",children:Object(i.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:"Cart"})})})})]})})}),Object(i.jsxs)("section",{className:"py-5",children:[Object(i.jsx)("h2",{className:"h5 text-uppercase mb-4",children:"Shopping cart"}),Object(i.jsxs)("div",{className:"row",children:[Object(i.jsxs)("div",{className:"col-lg-8 mb-4 mb-lg-0",children:[Object(i.jsx)(d,{listCart:o,onDeleteCart:(e,t)=>{if(console.log("idUser: "+e+", idProduct: "+t),localStorage.getItem("id_user")){(async()=>{const s={idUser:e,_id:t},c="?"+x.a.stringify(s),a=await h.a.deleteToCart(c);console.log(a)})(),v(!0),b.a.set("notifier","position","bottom-left"),b.a.error("B\u1ea1n \u0110\xe3 X\xf3a H\xe0ng Th\xe0nh C\xf4ng!")}else{const s={_id:t,idUser:e},c=Object(l.c)(s);N(c),b.a.set("notifier","position","bottom-left"),b.a.error("B\u1ea1n \u0110\xe3 X\xf3a H\xe0ng Th\xe0nh C\xf4ng!"),C({_id:t,count:""})}},onUpdateCount:(e,t,s)=>{if(console.log("Count: "+s+", idUser: "+e+", idProduct: "+t),localStorage.getItem("id_user")){(async()=>{const c={idUser:e,_id:t,quantity:s},a="?"+x.a.stringify(c),l=await h.a.putToCart(a);console.log(l)})(),v(!0),console.log("Ban Da Dang Nhap!"),b.a.set("notifier","position","bottom-left"),b.a.success("B\u1ea1n \u0110\xe3 S\u1eeda H\xe0ng Th\xe0nh C\xf4ng!")}else{const c={_id:t,idUser:e,quantity:s},a=Object(l.d)(c);N(a),b.a.set("notifier","position","bottom-left"),b.a.success("B\u1ea1n \u0110\xe3 S\u1eeda H\xe0ng Th\xe0nh C\xf4ng!"),C({_id:t,quantity:s})}}}),g&&Object(i.jsxs)("p",{style:{color:"red"},children:["** ",g]}),Object(i.jsx)("div",{className:"bg-light px-4 py-3",children:Object(i.jsxs)("div",{className:"row align-items-center text-center",children:[Object(i.jsx)("div",{className:"col-md-6 mb-3 mb-md-0 text-md-left",children:Object(i.jsxs)(r.b,{className:"btn btn-link p-0 text-dark btn-sm",to:"/shop",children:[Object(i.jsx)("i",{className:"fas fa-long-arrow-alt-left mr-2",children:" "}),"Continue shopping"]})}),Object(i.jsxs)("div",{className:"col-md-6 text-md-right",children:[k&&Object(i.jsx)(m.a,{to:"/checkout"}),Object(i.jsxs)("span",{className:"btn btn-outline-dark btn-sm",onClick:()=>{if(!localStorage.getItem("id_user"))return b.a.set("notifier","position","bottom-left"),void b.a.error("Vui L\xf2ng Ki\u1ec3m Tra L\u1ea1i \u0110\u0103ng Nh\u1eadp!");if(0===o.length)return b.a.set("notifier","position","bottom-left"),void b.a.error("Vui L\xf2ng Ki\u1ec3m Tra L\u1ea1i Gi\u1ecf H\xe0ng!");(async()=>{const e={id:localStorage.getItem("id_user")},t=await h.a.postCheckNumberProduct(e);t.success?(O(),w(!0)):O(t.message)})()},children:["Proceed to checkout",Object(i.jsx)("i",{className:"fas fa-long-arrow-alt-right ml-2"})]})]})]})})]}),Object(i.jsx)("div",{className:"col-lg-4",children:Object(i.jsx)("div",{className:"card border-0 rounded-0 p-lg-4 bg-light",children:Object(i.jsxs)("div",{className:"card-body",children:[Object(i.jsx)("h5",{className:"text-uppercase mb-4",children:"Cart total"}),Object(i.jsxs)("ul",{className:"list-unstyled mb-0",children:[Object(i.jsxs)("li",{className:"d-flex align-items-center justify-content-between",children:[Object(i.jsx)("strong",{className:"text-uppercase small font-weight-bold",children:"Subtotal"}),Object(i.jsxs)("span",{className:"text-muted small",children:[Object(n.a)(u)," VND"]})]}),Object(i.jsx)("li",{className:"border-bottom my-2"}),Object(i.jsxs)("li",{className:"d-flex align-items-center justify-content-between mb-4",children:[Object(i.jsx)("strong",{className:"text-uppercase small font-weight-bold",children:"Total"}),Object(i.jsxs)("span",{children:[Object(n.a)(u)," VND"]})]})]})]})})})]})]})]})}}}]);
//# sourceMappingURL=7.2aae6980.chunk.js.map