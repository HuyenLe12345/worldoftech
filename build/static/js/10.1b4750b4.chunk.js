(this.webpackJsonpclient_shop=this.webpackJsonpclient_shop||[]).push([[10],{122:function(e,t,a){"use strict";var s=a(11);const c={getCarts:e=>{const t="/carts".concat(e);return s.a.get(t)},postAddToCart:e=>{const t="/carts/add".concat(e);return s.a.post(t)},deleteToCart:e=>{const t="/carts/delete".concat(e);return s.a.delete(t)},putToCart:e=>{const t="/carts/update".concat(e);return s.a.put(t)},postCheckNumberProduct:e=>s.a.post("/carts/check",e)};t.a=c},127:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a(10),n=a(3),o=a(6),r=a(33),l=a(22),i=(a(125),a(31)),u=a.n(i),d=a(122),m=a(0);t.default=function(e){const t=Object(c.c)((e=>e.Cart.listCart)),[a,i]=Object(s.useState)(""),[p,j]=Object(s.useState)(""),[g,b]=Object(s.useState)(!1),[h,O]=Object(s.useState)(!1),[x,S]=Object(s.useState)(!1),[f,v]=Object(s.useState)(null),[N,w]=Object(s.useState)(!1),[C,_]=Object(s.useState)(!1),I=Object(c.b)(),k=()=>{localStorage.removeItem("token"),localStorage.removeItem("id_user"),localStorage.removeItem("name_user"),localStorage.removeItem("expiration_time")};return Object(s.useEffect)((()=>{(()=>{const e=localStorage.getItem("expiration_time");return e&&Date.now()>Number(e)})()&&k()}),[]),Object(s.useEffect)((()=>{(async()=>{if(!0===C){for(let e=0;e<t.length;e++){const a={idUser:localStorage.getItem("id_user"),_id:t[e]._id,quantity:t[e].quantity},s="?"+u.a.stringify(a),c=await d.a.postAddToCart(s);console.log(c)}console.log("move to HOme"),w(!0)}})()}),[C]),Object(m.jsx)("div",{className:"limiter",children:Object(m.jsx)("div",{className:"container-login100",children:Object(m.jsxs)("div",{className:"wrap-login100 p-l-55 p-r-55 p-t-65 p-b-50",children:[Object(m.jsx)("span",{className:"login100-form-title p-b-33",children:"Sign In"}),Object(m.jsxs)("div",{className:"d-flex justify-content-center pb-5",children:[h&&Object(m.jsx)("span",{className:"text-danger",children:f||"* Incorrect Email Format"}),g&&Object(m.jsx)("span",{className:"text-danger",children:f||"* Please Check Your Email"}),x&&Object(m.jsx)("span",{className:"text-danger",children:f||"* Please Check Your Password"})]}),Object(m.jsx)("div",{className:"wrap-input100 validate-input",children:Object(m.jsx)("input",{className:"input100",type:"text",placeholder:"Email",value:a,onChange:e=>{i(e.target.value)}})}),Object(m.jsx)("div",{className:"wrap-input100 rs1 validate-input",children:Object(m.jsx)("input",{className:"input100",type:"password",placeholder:"Password",value:p,onChange:e=>{j(e.target.value)}})}),Object(m.jsxs)("div",{className:"container-login100-form-btn m-t-20",children:[N&&Object(m.jsx)(n.a,{to:"/"}),Object(m.jsx)("button",{className:"login100-form-btn",onClick:()=>{if(a){if(!p)return b(!1),void S(!0);if(S(!1),function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}(a)){O(!1),console.log("PASS");(async()=>{const e={email:a,password:p};console.log("PARAMS",e);const t="?"+u.a.stringify(e),s=await r.a.postLogin(t);if(console.log("response",s),s&&s.error){const e=s.error;"email"===e.path?(b(!0),S(!1),v(e.message)):"password"===e.path&&(b(!1),S(!0),v(e.message))}if(s&&"Success"===s.message){const e=s.user;b(!1),S(!1),v(null),_(!0),localStorage.setItem("id_user",e._id),localStorage.setItem("token",e.token),localStorage.setItem("name_user",e.fullname);const t=Date.now()+36e5;localStorage.setItem("expiration_time",t);const a=Object(l.a)(localStorage.getItem("id_user"));return I(a),void setTimeout((()=>{k()}),36e5)}})()}else O(!0)}else b(!0)},children:"Sign in"})]}),Object(m.jsxs)("div",{className:"text-center p-t-45 p-b-4",children:[Object(m.jsx)("span",{className:"txt1",children:"Create an account?"}),"\xa0",Object(m.jsx)(o.b,{to:"/signup",className:"txt2 hov1",children:"Sign up"})]})]})})})}}}]);
//# sourceMappingURL=10.1b4750b4.chunk.js.map