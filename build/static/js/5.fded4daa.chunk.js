(this.webpackJsonpclient_shop=this.webpackJsonpclient_shop||[]).push([[5],{121:function(e,t,s){"use strict";function c(e){const t=e+"";let s="",c=0;for(let a=t.length-1;a>=0;a--)c++,s=t[a]+s,c%3===0&&0!==a&&(s="."+s,c=0);return s}s.d(t,"a",(function(){return c}))},122:function(e,t,s){"use strict";var c=s(11);const a={getCarts:e=>{const t="/carts".concat(e);return c.a.get(t)},postAddToCart:e=>{const t="/carts/add".concat(e);return c.a.post(t)},deleteToCart:e=>{const t="/carts/delete".concat(e);return c.a.delete(t)},putToCart:e=>{const t="/carts/update".concat(e);return c.a.put(t)},postCheckNumberProduct:e=>c.a.post("/carts/check",e)};t.a=a},126:function(e,t,s){},135:function(e,t,s){"use strict";s.r(t);var c=s(1),a=s(31),l=s.n(a),r=s(122),n=s(11);var o={postEmail:e=>{const t="/order/email".concat(e);return n.a.post(t)},postInfo:e=>{const t="/order/info".concat(e);return n.a.post(t)}},i=s(121),d=(s(126),s(58)),j=s.n(d),m=s(0);const u=j()("http://localhost:5000",{transports:["websocket"]});t.default=function(e){const[t,s]=Object(c.useState)([]),[a,n]=Object(c.useState)(0),[d,j]=Object(c.useState)(""),[b,h]=Object(c.useState)(!1),[p,x]=Object(c.useState)(""),[O,g]=Object(c.useState)(!1),[N,f]=Object(c.useState)(!1),[v,y]=Object(c.useState)(""),[S,C]=Object(c.useState)(!1),[w,k]=Object(c.useState)(""),[E,P]=Object(c.useState)(!1),[Y,I]=Object(c.useState)(null),[_,F]=Object(c.useState)(!1),[A,H]=Object(c.useState)(!1);return Object(c.useEffect)((()=>{if(localStorage.getItem("id_user")){const e=async()=>{const e={idUser:localStorage.getItem("id_user")},t="?"+l.a.stringify(e),c=await r.a.getCarts(t);console.log(c),s(c.cart),function(e){let t=0;e.map((e=>t+=parseInt(e.price)*parseInt(e.quantity)));n(t)}(c.cart),0===c.length&&window.location.replace("/cart")};e()}}),[]),Object(c.useEffect)((()=>{if(A){(async()=>{const e={to:p,fullname:d,phone:v,address:w,idUser:localStorage.getItem("id_user")},t="?"+l.a.stringify(e),s=await o.postEmail(t);if(s.error)return null;console.log(s)})();const e=localStorage.getItem("id_user");u.emit("send_order",e),setTimeout((()=>{F(!_),H(!A)}),3e3)}}),[A]),Object(m.jsxs)("div",{children:[A&&Object(m.jsx)("div",{className:"wrapper_loader",children:Object(m.jsx)("div",{className:"loader"})}),Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("section",{className:"py-5 bg-light",children:Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("div",{className:"row px-4 px-lg-5 py-lg-4 align-items-center",children:[Object(m.jsx)("div",{className:"col-lg-6",children:Object(m.jsx)("h1",{className:"h2 text-uppercase mb-0",children:"Checkout"})}),Object(m.jsx)("div",{className:"col-lg-6 text-lg-right",children:Object(m.jsx)("nav",{"aria-label":"breadcrumb",children:Object(m.jsxs)("ol",{className:"breadcrumb justify-content-lg-end mb-0 px-0",children:[Object(m.jsx)("li",{className:"breadcrumb-item",children:Object(m.jsx)("a",{href:"index.html",children:"Home"})}),Object(m.jsx)("li",{className:"breadcrumb-item",children:Object(m.jsx)("a",{href:"cart.html",children:"Cart"})}),Object(m.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:"Checkout"})]})})})]})})}),!_&&Object(m.jsxs)("section",{className:"py-5",children:[Object(m.jsx)("h2",{className:"h5 text-uppercase mb-4",children:"Billing details"}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-lg-8",children:Object(m.jsx)("form",{children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col-lg-12 form-group",children:[Object(m.jsx)("label",{className:"text-small text-uppercase",htmlFor:"Fullname",children:"Full Name:"}),Object(m.jsx)("input",{className:"form-control form-control-lg",value:d,onChange:e=>{j(e.target.value)},type:"text",placeholder:"Enter Your Full Name Here!"}),b&&Object(m.jsx)("span",{className:"text-danger",children:"* Please Check Your Full Name!"})]}),Object(m.jsxs)("div",{className:"col-lg-12 form-group",children:[Object(m.jsxs)("label",{className:"text-small text-uppercase",htmlFor:"Email",children:["Email:"," "]}),Object(m.jsx)("input",{className:"form-control form-control-lg",value:p,onChange:e=>{x(e.target.value)},type:"text",placeholder:"Enter Your Email Here!"}),O&&Object(m.jsx)("span",{className:"text-danger",children:Y||"* Please Check Your Email!"}),N&&Object(m.jsx)("span",{className:"text-danger",children:"* Incorrect Email Format"})]}),Object(m.jsxs)("div",{className:"col-lg-12 form-group",children:[Object(m.jsxs)("label",{className:"text-small text-uppercase",htmlFor:"Phone",children:["Phone Number:"," "]}),Object(m.jsx)("input",{className:"form-control form-control-lg",value:v,onChange:e=>{y(e.target.value)},type:"text",placeholder:"Enter Your Phone Number Here!"}),S&&Object(m.jsx)("span",{className:"text-danger",children:Y||"* Please Check Your Phone Number!"})]}),Object(m.jsxs)("div",{className:"col-lg-12 form-group",children:[Object(m.jsxs)("label",{className:"text-small text-uppercase",htmlFor:"Address",children:["Address:"," "]}),Object(m.jsx)("input",{className:"form-control form-control-lg",value:w,onChange:e=>{k(e.target.value)},type:"text",placeholder:"Enter Your Address Here!"}),E&&Object(m.jsx)("span",{className:"text-danger",children:"* Please Check Your Address!"})]}),Object(m.jsx)("div",{className:"col-lg-12 form-group",children:Object(m.jsx)("a",{className:"btn btn-dark",style:{color:"white"},type:"submit",onClick:()=>{if(!d)return h(!0),g(!1),C(!1),void P(!1);if(!p)return h(!1),g(!0),C(!1),void P(!1);if(C(!1),P(!1),h(!1),!function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}(p))return f(!0),h(!1),g(!1),C(!1),void P(!1);if(f(!1),!v)return h(!1),g(!1),C(!0),void P(!1);if(h(!1),g(!1),C(!1),P(!1),w){console.log("Thanh Cong");(async()=>{const e={to:p,fullname:d,phone:v,address:w,idUser:localStorage.getItem("id_user")},t="?"+l.a.stringify(e),s=await o.postInfo(t);return s.path&&"email"===s.path?(g(!0),C(!1),I(s.error),null):s.path&&"phone"===s.path?(C(!0),g(!1),I(s.error),null):(I(null),void H(!A))})()}else h(!1),g(!1),C(!1),P(!0)},children:"Place order"})})]})})}),Object(m.jsx)("div",{className:"col-lg-4",children:Object(m.jsx)("div",{className:"card border-0 rounded-0 p-lg-4 bg-light",children:Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)("h5",{className:"text-uppercase mb-4",children:"Your order"}),Object(m.jsxs)("ul",{className:"list-unstyled mb-0",children:[t&&t.map((e=>Object(m.jsxs)("div",{children:[Object(m.jsxs)("li",{className:"d-flex align-items-center justify-content-between",children:[Object(m.jsx)("strong",{className:"small font-weight-bold",children:e.name}),Object(m.jsx)("br",{}),Object(m.jsxs)("span",{className:"text-muted small",children:[Object(i.a)(e.price)," VND x"," ",e.quantity]})]}),Object(m.jsx)("li",{className:"border-bottom my-2"})]},e._id))),Object(m.jsxs)("li",{className:"d-flex align-items-center justify-content-between",children:[Object(m.jsx)("strong",{className:"text-uppercase small font-weight-bold",children:"Total"}),Object(m.jsxs)("span",{children:[Object(i.a)(a)," VND"]})]})]})]})})})]})]}),_&&Object(m.jsx)("section",{className:"py-5",children:Object(m.jsxs)("div",{className:"p-5",children:[Object(m.jsx)("h1",{children:"You Have Successfully Ordered!"}),Object(m.jsx)("p",{style:{fontSize:"1.2rem"},children:"Please Check Your Email."})]})})]})]})}}}]);
//# sourceMappingURL=5.fded4daa.chunk.js.map